{% extends "base.html" %}
{% block content %}
  <h2>Library</h2>
  {% if user.is_owner %}
    <p><a href="{{ url_for('upload') }}">Upload new content</a></p>
  {% endif %}
  <div class="grid">
  {% for c in contents %}
    <div class="card">
      <h3>{{ c.title or c.filename }}</h3>
      <p>{{ c.description or '' }}</p>
      <p>Uploaded by: {{ c.uploaded_by }}</p>
      <p>
        <a href="{{ url_for('watch', content_id=c.id) }}?token={{ c.signed_token }}">Watch</a>
        {% if user.is_owner %}
          <form action="{{ url_for('delete_content', content_id=c.id) }}" method="post" style="display:inline">
            <button type="submit">Delete</button>
          </form>
        {% endif %}
      </p>
    </div>
  {% endfor %}
  </div>
{% endblock %}
